{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Rey%20Omar%20Esguerra/Downloads/reyecommerce/store/store.ts"],"sourcesContent":["import { Product } from \"@/sanity.types\";\r\nimport { create } from \"zustand\";\r\nimport { persist } from \"zustand/middleware\";\r\n\r\nexport interface BasketItem {\r\n    product: Product;\r\n    quantity: number;\r\n} //3:10:26\r\n\r\ninterface BasketState {\r\n    items: BasketItem[];\r\n    addItem: (product: Product) => void;\r\n    removeItem: (productId: string) => void;\r\n    clearBasket: () => void;\r\n    getTotalPrice: () => number;\r\n    getItemCount: (productId: string) => number;\r\n    getGroupedItems: () => BasketItem[];\r\n}\r\n\r\n    const useBasketStore = create<BasketState>()(\r\n        persist(\r\n            (set, get) => ({\r\n                items: [],\r\n                addItem: (product) => \r\n                    set((state) => {\r\n                    const existingItem = state.items.find(\r\n                        (item) => item.product._id === product._id\r\n                    );\r\n                    if (existingItem) {\r\n                        return {\r\n                            items: state.items.map(item =>\r\n                                item.product._id === product._id\r\n                                    ? { ...item, quantity: item.quantity + 1 }\r\n                                    : item\r\n                            )\r\n                        };\r\n                    } else {\r\n                        return { items: [...state.items, { product, quantity: 1 }] };\r\n                    }\r\n            }),\r\n                removeItem: (productId) => \r\n                    set((state) => ({\r\n                    items: state.items.reduce((acc, item) => {\r\n                        if (item.product._id === productId) {\r\n                            if (item.quantity > 1) {\r\n                                acc.push({ ...item, quantity: item.quantity - 1 });\r\n                            }\r\n                        } else {\r\n                            acc.push(item);\r\n                        }\r\n                        return acc;\r\n                    }, [] as BasketItem[])\r\n                })),\r\n                clearBasket: () => set({ items: [] }),\r\n                getTotalPrice: () => {\r\n                    return get().items.reduce(\r\n                        (total, item) => total + (item.product.price ?? 0) * item.quantity, \r\n                        0\r\n                    );\r\n                },\r\n                getItemCount: (productId) => {\r\n                    const item = get().items.find((item) => item.product._id === productId);\r\n                    return item ? item.quantity : 0;\r\n                },\r\n                getGroupedItems: () => get().items,\r\n        }),\r\n            {\r\n                name: \"basket-store\",\r\n            }\r\n        )\r\n    );\r\n\r\nexport default useBasketStore;  \r\n//3:14:50"],"names":[],"mappings":";;;AACA;AACA;;;AAiBI,MAAM,iBAAiB,CAAA,GAAA,wIAAA,CAAA,SAAM,AAAD,IACxB,CAAA,GAAA,6IAAA,CAAA,UAAO,AAAD,EACF,CAAC,KAAK,MAAQ,CAAC;QACX,OAAO,EAAE;QACT,SAAS,CAAC,UACN,IAAI,CAAC;gBACL,MAAM,eAAe,MAAM,KAAK,CAAC,IAAI,CACjC,CAAC,OAAS,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG;gBAE9C,IAAI,cAAc;oBACd,OAAO;wBACH,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA,OACnB,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG,GAC1B;gCAAE,GAAG,IAAI;gCAAE,UAAU,KAAK,QAAQ,GAAG;4BAAE,IACvC;oBAEd;gBACJ,OAAO;oBACH,OAAO;wBAAE,OAAO;+BAAI,MAAM,KAAK;4BAAE;gCAAE;gCAAS,UAAU;4BAAE;yBAAE;oBAAC;gBAC/D;YACR;QACI,YAAY,CAAC,YACT,IAAI,CAAC,QAAU,CAAC;oBAChB,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK;wBAC5B,IAAI,KAAK,OAAO,CAAC,GAAG,KAAK,WAAW;4BAChC,IAAI,KAAK,QAAQ,GAAG,GAAG;gCACnB,IAAI,IAAI,CAAC;oCAAE,GAAG,IAAI;oCAAE,UAAU,KAAK,QAAQ,GAAG;gCAAE;4BACpD;wBACJ,OAAO;4BACH,IAAI,IAAI,CAAC;wBACb;wBACA,OAAO;oBACX,GAAG,EAAE;gBACT,CAAC;QACD,aAAa,IAAM,IAAI;gBAAE,OAAO,EAAE;YAAC;QACnC,eAAe;YACX,OAAO,MAAM,KAAK,CAAC,MAAM,CACrB,CAAC,OAAO,OAAS,QAAQ,CAAC,KAAK,OAAO,CAAC,KAAK,IAAI,CAAC,IAAI,KAAK,QAAQ,EAClE;QAER;QACA,cAAc,CAAC;YACX,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,OAAO,CAAC,GAAG,KAAK;YAC7D,OAAO,OAAO,KAAK,QAAQ,GAAG;QAClC;QACA,iBAAiB,IAAM,MAAM,KAAK;IAC1C,CAAC,GACG;IACI,MAAM;AACV;uCAIG;CACf,SAAS"}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Rey%20Omar%20Esguerra/Downloads/reyecommerce/components/AddToBasketButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Product } from \"@/sanity.types\"\r\nimport useBasketStore from \"@/store/store\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\ninterface AddToBasketButtonProps {\r\n    product: Product;\r\n    disabled?: boolean;\r\n}\r\n\r\nfunction AddToBasketButton({ product, disabled}: AddToBasketButtonProps) {\r\n    const {addItem, removeItem, getItemCount } = useBasketStore();\r\n    const itemCount = getItemCount(product._id);\r\n\r\n    const [isClient, setIsClient] = useState(false);\r\n\r\n    //use useeffect to set isClient to true after the component mounts\r\n    //this ensures that the component is only rendered on the client side\r\n    // preventing hydration errors due to server/client mismatch\r\n    useEffect(() => {\r\n        setIsClient(true);\r\n    }, []);\r\n\r\n    if (!isClient) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center space-x-2\">\r\n            <button\r\n                onClick={() => removeItem(product._id)}\r\n                className={`w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200 ${\r\n                    itemCount === 0\r\n                    ? \"bg-gray-100 cursor-not-allowed\"\r\n                    : \"bg-gray-200 hover:bg-gray-300\"\r\n                }`}\r\n                disabled={itemCount === 0 || disabled}\r\n            >\r\n                <span\r\n                    className={`text-xl font-bold ${itemCount === 0 ? \"text-gray-400\" : \"text-gray-600\"}`}\r\n                >\r\n                -\r\n                </span>\r\n            </button>\r\n            <span className=\"w-8 text-center font-semibold\">{itemCount}</span>\r\n            <button\r\n                onClick={() => addItem(product)}\r\n                className={`w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200 ${\r\n                    disabled\r\n                    ? \"bg-gray-400 cursor-not-allowed\"\r\n                    : \"bg-blue-500 hover:bg-blue-600\"\r\n                }`}\r\n                disabled={disabled}\r\n            >\r\n                <span className=\"text-white text-xl font-bold\">+</span>\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\n//3:19:14\r\n\r\nexport default AddToBasketButton;"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAWA,SAAS,kBAAkB,EAAE,OAAO,EAAE,QAAQ,EAAyB;IACnE,MAAM,EAAC,OAAO,EAAE,UAAU,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,8GAAA,CAAA,UAAc,AAAD;IAC1D,MAAM,YAAY,aAAa,QAAQ,GAAG;IAE1C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEzC,kEAAkE;IAClE,qEAAqE;IACrE,4DAA4D;IAC5D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,YAAY;IAChB,GAAG,EAAE;IAEL,IAAI,CAAC,UAAU;QACX,OAAO;IACX;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBACG,SAAS,IAAM,WAAW,QAAQ,GAAG;gBACrC,WAAW,CAAC,qFAAqF,EAC7F,cAAc,IACZ,mCACA,iCACJ;gBACF,UAAU,cAAc,KAAK;0BAE7B,cAAA,8OAAC;oBACG,WAAW,CAAC,kBAAkB,EAAE,cAAc,IAAI,kBAAkB,iBAAiB;8BACxF;;;;;;;;;;;0BAIL,8OAAC;gBAAK,WAAU;0BAAiC;;;;;;0BACjD,8OAAC;gBACG,SAAS,IAAM,QAAQ;gBACvB,WAAW,CAAC,qFAAqF,EAC7F,WACE,mCACA,iCACJ;gBACF,UAAU;0BAEV,cAAA,8OAAC;oBAAK,WAAU;8BAA+B;;;;;;;;;;;;;;;;;AAI/D;uCAIe"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}
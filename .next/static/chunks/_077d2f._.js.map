{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Rey%20Omar%20Esguerra/Downloads/reyecommerce/store/store.ts"],"sourcesContent":["import { Product } from \"@/sanity.types\";\r\nimport { create } from \"zustand\";\r\nimport { persist } from \"zustand/middleware\";\r\n\r\nexport interface BasketItem {\r\n    product: Product;\r\n    quantity: number;\r\n} //3:10:26\r\n\r\ninterface BasketState {\r\n    items: BasketItem[];\r\n    addItem: (product: Product) => void;\r\n    removeItem: (productId: string) => void;\r\n    clearBasket: () => void;\r\n    getTotalPrice: () => number;\r\n    getItemCount: (productId: string) => number;\r\n    getGroupedItems: () => BasketItem[];\r\n}\r\n\r\n    const useBasketStore = create<BasketState>()(\r\n        persist(\r\n            (set, get) => ({\r\n                items: [],\r\n                addItem: (product) => \r\n                    set((state) => {\r\n                    const existingItem = state.items.find(\r\n                        (item) => item.product._id === product._id\r\n                    );\r\n                    if (existingItem) {\r\n                        return {\r\n                            items: state.items.map(item =>\r\n                                item.product._id === product._id\r\n                                    ? { ...item, quantity: item.quantity + 1 }\r\n                                    : item\r\n                            )\r\n                        };\r\n                    } else {\r\n                        return { items: [...state.items, { product, quantity: 1 }] };\r\n                    }\r\n            }),\r\n                removeItem: (productId) => \r\n                    set((state) => ({\r\n                    items: state.items.reduce((acc, item) => {\r\n                        if (item.product._id === productId) {\r\n                            if (item.quantity > 1) {\r\n                                acc.push({ ...item, quantity: item.quantity - 1 });\r\n                            }\r\n                        } else {\r\n                            acc.push(item);\r\n                        }\r\n                        return acc;\r\n                    }, [] as BasketItem[])\r\n                })),\r\n                clearBasket: () => set({ items: [] }),\r\n                getTotalPrice: () => {\r\n                    return get().items.reduce(\r\n                        (total, item) => total + (item.product.price ?? 0) * item.quantity, \r\n                        0\r\n                    );\r\n                },\r\n                getItemCount: (productId) => {\r\n                    const item = get().items.find((item) => item.product._id === productId);\r\n                    return item ? item.quantity : 0;\r\n                },\r\n                getGroupedItems: () => get().items,\r\n        }),\r\n            {\r\n                name: \"basket-store\",\r\n            }\r\n        )\r\n    );\r\n\r\nexport default useBasketStore;  \r\n//3:14:50"],"names":[],"mappings":";;;AACA;AACA;;;AAiBI,MAAM,iBAAiB,CAAA,GAAA,2IAAA,CAAA,SAAM,AAAD,IACxB,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD,EACF,CAAC,KAAK,MAAQ,CAAC;QACX,OAAO,EAAE;QACT,SAAS,CAAC,UACN,IAAI,CAAC;gBACL,MAAM,eAAe,MAAM,KAAK,CAAC,IAAI,CACjC,CAAC,OAAS,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG;gBAE9C,IAAI,cAAc;oBACd,OAAO;wBACH,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA,OACnB,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG,GAC1B;gCAAE,GAAG,IAAI;gCAAE,UAAU,KAAK,QAAQ,GAAG;4BAAE,IACvC;oBAEd;gBACJ,OAAO;oBACH,OAAO;wBAAE,OAAO;+BAAI,MAAM,KAAK;4BAAE;gCAAE;gCAAS,UAAU;4BAAE;yBAAE;oBAAC;gBAC/D;YACR;QACI,YAAY,CAAC,YACT,IAAI,CAAC,QAAU,CAAC;oBAChB,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK;wBAC5B,IAAI,KAAK,OAAO,CAAC,GAAG,KAAK,WAAW;4BAChC,IAAI,KAAK,QAAQ,GAAG,GAAG;gCACnB,IAAI,IAAI,CAAC;oCAAE,GAAG,IAAI;oCAAE,UAAU,KAAK,QAAQ,GAAG;gCAAE;4BACpD;wBACJ,OAAO;4BACH,IAAI,IAAI,CAAC;wBACb;wBACA,OAAO;oBACX,GAAG,EAAE;gBACT,CAAC;QACD,aAAa,IAAM,IAAI;gBAAE,OAAO,EAAE;YAAC;QACnC,eAAe;YACX,OAAO,MAAM,KAAK,CAAC,MAAM,CACrB,CAAC,OAAO,OAAS,QAAQ,CAAC,KAAK,OAAO,CAAC,KAAK,IAAI,CAAC,IAAI,KAAK,QAAQ,EAClE;QAER;QACA,cAAc,CAAC;YACX,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,OAAO,CAAC,GAAG,KAAK;YAC7D,OAAO,OAAO,KAAK,QAAQ,GAAG;QAClC;QACA,iBAAiB,IAAM,MAAM,KAAK;IAC1C,CAAC,GACG;IACI,MAAM;AACV;uCAIG;;;;CACf,SAAS"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Rey%20Omar%20Esguerra/Downloads/reyecommerce/components/Header.tsx"],"sourcesContent":["'use client'\r\n\r\nimport {ClerkLoaded, SignedIn, SignInButton, UserButton, useUser } from \"@clerk/nextjs\";\r\nimport Link from \"next/link\";\r\nimport Form from \"next/form\";\r\nimport { PackageIcon, TrolleyIcon } from \"@sanity/icons\";\r\nimport useBasketStore from \"@/store/store\";\r\n\r\nfunction Header() {\r\n    const { user } = useUser();\r\n    const itemCount = useBasketStore((state) =>\r\n        state.items.reduce((total, item) => total + item.quantity, 0)\r\n);\r\n\r\n    const createClerkPasskey = async () => {\r\n        try {\r\n            const response = await user?.createPasskey();\r\n            console.log(response);\r\n        } catch (err) {\r\n            console.error(\"Error:\", JSON.stringify(err, null, 2));\r\n        } \r\n    }; \r\n\r\n    return (\r\n        <header className=\"flex flex-wrap justify-between items-center px-4 py-2\">\r\n            {/* Top row */}\r\n            <div className=\"flex w-full flex-wrap justify-between items-center\">\r\n                <Link \r\n                    href=\"/\"\r\n                    className=\"\r\n                        text-2xl\r\n                        font-bold\r\n                        text-pink-500\r\n                        hover:opacity-50\r\n                        cursor-pointer\r\n                        mx-auto \r\n                        sm:mx-0\"\r\n                >\r\n                    {/* here goes the name-logo 2 mb */}\r\n                    Freemium\r\n                </Link>\r\n                \r\n                <Form\r\n                    action=\"/search\"\r\n                    className=\"w-full sm:w-auto sm:flex-1 sm:mx-4 mt-2 sm:mt-0\"\r\n                >\r\n                    <input \r\n                        type=\"text\"\r\n                        name=\"query\"\r\n                        placeholder=\"Search for products\"\r\n                        className=\"\r\n                            bg-gray-100\r\n                            text-gray-800\r\n                            px-4\r\n                            py-2\r\n                            rounded\r\n                            focus:outline-none\r\n                            focus:ring-2\r\n                            focus:ring-pink-500\r\n                            focus:ring-opacity-50\r\n                            border\r\n                            w-full\r\n                            max-w-4xl\r\n                        \"\r\n                    />\r\n                </Form>\r\n\r\n                <div className=\"flex items-center space-x-4 mt-4 sm:mt-0 flex-1 sm:flex-none\">\r\n                    <Link \r\n                        href=\"/basket\"\r\n                        className=\"flex-1 relative flex justify-center sm:justify-start sm:flex-none items-center space-x-2 bg-pink-500 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded\"\r\n                    >\r\n                        <TrolleyIcon className=\"w-6 h-6\" />\r\n\r\n                        <span className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs\">\r\n                            {itemCount}\r\n                        </span>\r\n                        {/* 3:20:42 */}\r\n                        <span>My Cart</span>\r\n                    </Link>\r\n\r\n                    {/*User area*/}\r\n                    <ClerkLoaded>\r\n                        <SignedIn>\r\n                            <Link\r\n                                href=\"/orders\"\r\n                                className=\"flex-1 relative flex justify-center sm:justify-start sm:flex-none items-center space-x-2 bg-pink-500 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded\"\r\n                            >\r\n                                <PackageIcon className=\"w-6 h-6\" />\r\n                                <span>My Orders</span>\r\n                            </Link>\r\n                        </SignedIn>\r\n\r\n                        {user ? (\r\n                            <div className=\"flex items-center space-x-2\">\r\n                                <UserButton />\r\n\r\n                                <div className=\"hidden sm:block text-xs\">\r\n                                    <p className=\"text-gray-400\">Welcome Back</p>\r\n                                    <p className=\"font-bold\">{user.fullName}</p>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <SignInButton mode=\"modal\" />\r\n                        )}\r\n\r\n                        {user?.passkeys.length === 0 && (\r\n                            <button\r\n                                onClick={createClerkPasskey}\r\n                                className=\"bg-white hover:bg-pink-700 hover:text-white animate-pulse text-pink-500 font py-2 px-4 rounded border-pink-300 border\"\r\n                            >\r\n                                Create passkey\r\n                            </button>\r\n                        )}\r\n                    </ClerkLoaded>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AAEA;AAJA;AAGA;AAHA;AAAA;AAAA;;;AAFA;;;;;;AAQA,SAAS;;IACL,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD;IACvB,MAAM,YAAY,CAAA,GAAA,iHAAA,CAAA,UAAc,AAAD;4CAAE,CAAC,QAC9B,MAAM,KAAK,CAAC,MAAM;oDAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ;mDAAE;;IAG/D,MAAM,qBAAqB;QACvB,IAAI;YACA,MAAM,WAAW,MAAM,MAAM;YAC7B,QAAQ,GAAG,CAAC;QAChB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,UAAU,KAAK,SAAS,CAAC,KAAK,MAAM;QACtD;IACJ;IAEA,qBACI,6LAAC;QAAO,WAAU;kBAEd,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC,+JAAA,CAAA,UAAI;oBACD,MAAK;oBACL,WAAU;8BAS0B;;;;;;8BAIxC,6LAAC,+HAAA,CAAA,UAAI;oBACD,QAAO;oBACP,WAAU;8BAEV,cAAA,6LAAC;wBACG,MAAK;wBACL,MAAK;wBACL,aAAY;wBACZ,WAAU;;;;;;;;;;;8BAiBlB,6LAAC;oBAAI,WAAU;;sCACX,6LAAC,+JAAA,CAAA,UAAI;4BACD,MAAK;4BACL,WAAU;;8CAEV,6LAAC,qJAAA,CAAA,cAAW;oCAAC,WAAU;;;;;;8CAEvB,6LAAC;oCAAK,WAAU;8CACX;;;;;;8CAGL,6LAAC;8CAAK;;;;;;;;;;;;sCAIV,6LAAC,0LAAA,CAAA,cAAW;;8CACR,6LAAC,4KAAA,CAAA,WAAQ;8CACL,cAAA,6LAAC,+JAAA,CAAA,UAAI;wCACD,MAAK;wCACL,WAAU;;0DAEV,6LAAC,qJAAA,CAAA,cAAW;gDAAC,WAAU;;;;;;0DACvB,6LAAC;0DAAK;;;;;;;;;;;;;;;;;gCAIb,qBACG,6LAAC;oCAAI,WAAU;;sDACX,6LAAC,8KAAA,CAAA,aAAU;;;;;sDAEX,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAE,WAAU;8DAAgB;;;;;;8DAC7B,6LAAC;oDAAE,WAAU;8DAAa,KAAK,QAAQ;;;;;;;;;;;;;;;;;yDAI/C,6LAAC,8KAAA,CAAA,eAAY;oCAAC,MAAK;;;;;;gCAGtB,MAAM,SAAS,WAAW,mBACvB,6LAAC;oCACG,SAAS;oCACT,WAAU;8CACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS7B;GA/GS;;QACY,+JAAA,CAAA,UAAO;QACN,iHAAA,CAAA,UAAc;;;KAF3B;uCAiHM"}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}